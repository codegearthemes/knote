window.knote=window.knote||{},function(){"use strict";var e;knote.delegate={on:function(e,t,n){return this.namespaces||(this.namespaces={}),this.namespaces[e]=t,n=n||!1,this.addEventListener(e.split(".")[0],t,n),this},off:function(e){if(this.namespaces)return this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e],this}},window.on=Element.prototype.on=knote.delegate.on,window.off=Element.prototype.off=knote.delegate.off,knote.selectors=function(){knote.$cache={$body:document.body,$html:document.querySelector("html")}},knote.a11y={trapFocus:function(e){var t={focusin:e.namespace?"focusin."+e.namespace:"focusin",focusout:e.namespace?"focusout."+e.namespace:"focusout",keydown:e.namespace?"keydown."+e.namespace:"keydown.handleFocus"},n=e.container.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex^="-"])'),o=[].slice.call(n).filter((e=>null!==e.offsetParent)),s=o[0],i=o[o.length-1];e.elementToFocus||(e.elementToFocus=e.container),e.container.setAttribute("tabindex","-1"),e.elementToFocus.focus(),document.documentElement.off("focusin"),document.documentElement.on(t.focusout,(function(){document.documentElement.off(t.keydown)})),document.documentElement.on(t.focusin,(function(e){e.target!==i&&e.target!==s||document.documentElement.on(t.keydown,(function(e){!function(e){if(9!==e.keyCode||"Tab"!==e.key)return;e.shiftKey?e.target===s&&(e.preventDefault(),i.focus()):(e.target===i&&e.preventDefault(),s.focus())}(e)}))}))},removeTrapFocus:function(e){var t=e.namespace?"focusin."+e.namespace:"focusin";e.container&&e.container.removeAttribute("tabindex"),document.documentElement.off(t)},lockMobileScrolling:function(e,t){var n=t||document.documentElement;document.documentElement.classList.add("lock-scroll"),n.on("touchmove"+e,(function(){return!0}))},unlockMobileScrolling:function(e,t){document.documentElement.classList.remove("lock-scroll"),(t||document.documentElement).off("touchmove"+e)}},document.documentElement.on("keyup.tab",(function(e){"Tab"!=e.key&&9!==e.keyCode||(document.documentElement.classList.add("outline"),document.documentElement.off("keyup.tab"))})),knote.getHash=function(){return window.location.hash},knote.header=function(){const e=document.querySelector("[data-header]"),t=e?.querySelectorAll(".menu a");function n(e){let t=e.currentTarget;for(;!t.classList.contains("menu");)t.classList.contains("sub-menu-toggle")&&t.classList.toggle("focus"),t=t.parentElement}if(t.length&&t.forEach((e=>{e.addEventListener("focusin",n,!0),e.addEventListener("focusout",n,!0)})),e?.getAttribute("data-sticky")){window.scrollY;e.offsetTop;const t=()=>{if("scroll"==e?.getAttribute("data-sticky-direction")){const t=window.scrollY||document.documentElement.scrollTop,n=e.getBoundingClientRect().top+1e3;e.classList.toggle("sticky-active",t>n)}};window.addEventListener("scroll",t)}const o=e.querySelector("[data-main-menu]");o?.querySelectorAll("li").length>0&&o.querySelectorAll("li").forEach((e=>{let t=e.querySelector(".sub-menu");if(t){const n=(e=>()=>{knote.isInHorizontalViewport(e)||e.classList.add("sub-menu-reverse")})(t),o=(e=>()=>{knote.isInHorizontalViewport(e)||e.classList.add("sub-menu-reverse")})(t);e.addEventListener("mouseover",n),e.addEventListener("focusin",o),e.addEventListener("mouseout",(function(){t.classList.remove("sub-menu-reverse")})),e.addEventListener("focusout",(function(){t.classList.remove("sub-menu-reverse")}))}}))},knote.searchToggle=function(){const e=document.querySelector("[data-search-form]");document.querySelectorAll("[data-search-toggle]").forEach((t=>{t.addEventListener("click",(function(){e.classList.toggle("active"),knote.a11y.trapFocus({container:e,namespace:"search_focus"})}))}))},knote.drawersInit=function(){[{id:"drawer-navigation-menu",position:"left"},{id:"drawer-widget-minicart",position:"right"}].forEach((e=>{knote[`${e.position}Drawer`]=new knote.Drawer(e.id,e.position)}))},knote.subMenuToggle=function(){document.querySelectorAll("[data-submenu-toggle]").forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault(),this.closest("li").classList.toggle("expanded")}))}))},knote.quantityInit=function(){document.addEventListener("click",(function(e){const t=e.target.closest(".quantity button");if(t&&t.closest(".quantity")){const e=t.closest(".quantity").querySelector(".qty");if(!e)return;const n=parseFloat(e.value),o=parseFloat(e.getAttribute("max")),s=parseFloat(e.getAttribute("min")),i=parseFloat(e.getAttribute("step"));t.classList.contains("plus")?e.value=o&&o<=n?o:n+i:t.classList.contains("minus")&&(s&&s>=n?e.value=s:n>1&&(e.value=n-i))}}))},knote.collapsible=function(){document.querySelectorAll("[data-collapsible-title]").forEach((e=>{e.addEventListener("click",(function(){this.classList.toggle("active"),this.setAttribute("aria-expanded",this.classList.contains("active"));const e=this.nextElementSibling;e&&e.classList.toggle("hide")}))}))},knote.footer=function(){const e=document.querySelector("[data-scrollup]"),t=document.querySelector("[data-container-main]"),n=document.querySelector('[data-footer-type="fixed"]');e&&(document.addEventListener("scroll",(()=>{window.scrollY>500?e.classList.add("active"):e.classList.remove("active")})),e.addEventListener("click",(()=>{document.documentElement.scrollTo({top:0,behavior:"smooth"})}))),n&&(t.style.marginBottom=n.offsetHeight+"px")},knote.Drawer=function(){function e(e,t,n){const o={close:".js-drawer-close",open:`.js-drawer-open-${t}`,openClass:"js-drawer-open",dirOpenClass:`js-drawer-open-${t}`};if(this.$nodes={page:document.querySelector("#page"),parent:document.querySelector("body, html")},this.$drawer=document.getElementById(`${e}`),!this.$drawer)return!1;this.drawerIsOpen=!1,this.$config=Object.assign(o,n),this.$focusOnOpen=this.$config.focusIdOnOpen?document.getElementById(this.$config.focusIdOnOpen):this.$drawer,this.init()}return e.prototype=Object.assign({},e.prototype,{init(){document.querySelectorAll(this.$config.open).forEach((e=>{e.addEventListener("click",this.open.bind(this))})),this.$drawer.querySelectorAll(this.$config.close).forEach((e=>{e.addEventListener("click",this.close.bind(this))}))},open(e){const t=!e;if(e&&e.preventDefault(),e&&e.stopPropagation&&(e.stopPropagation(),this.$activeSource=e.currentTarget),this.drawerIsOpen&&!t)return this.close();this.$nodes.parent.classList.add(this.$config.openClass,this.$config.dirOpenClass),this.drawerIsOpen=!0,knote.a11y.trapFocus({container:this.$drawer,elementToFocus:this.$focusOnOpen,namespace:"drawer_focus"}),this.$activeSource&&this.$activeSource.getAttribute("aria-expanded")&&this.$activeSource.setAttribute("aria-expanded","true"),this.unbindEvents()},close(){this.drawerIsOpen&&(document.activeElement&&document.activeElement.blur(),this.$nodes.parent.classList.remove(this.$config.dirOpenClass,this.$config.openClass),this.drawerIsOpen=!1,knote.a11y.removeTrapFocus(this.$drawer,"drawer_focus"),this.unbindEvents())}}),e.prototype.bindEvents=function(){window.addEventListener("keyup",(e=>{"Escape"===e.key&&this.close()})),this.$drawer.addEventListener("click",this.close.bind(this))},e.prototype.unbindEvents=function(){window.removeEventListener("keyup",this.handleKeyUp),this.$drawer.removeEventListener("click",this.close.bind(this))},e}(),knote.isInVerticalViewport=function(e){var t=e.getBoundingClientRect();return t.top>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)},knote.isInHorizontalViewport=function(e){var t=e.getBoundingClientRect();return t.left>=0&&t.right<=document.documentElement.clientWidth},knote.initGlobals=function(){["selectors","header","searchToggle","subMenuToggle","drawersInit","quantityInit","collapsible","footer"].forEach((e=>{"function"==typeof knote[e]&&knote[e]()}));document.querySelectorAll('a[href^="#"]:not([href="#"])').forEach((e=>{e?.addEventListener("click",(function(e){e.preventDefault();let t=this.getAttribute("href");document.querySelector(t)?.scrollIntoView({behavior:"smooth",block:"start"})}))}))},e=function(){knote.initGlobals()},"loading"!=document.readyState?e():document.addEventListener("DOMContentLoaded",e)}();